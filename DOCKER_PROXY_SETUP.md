# Docker Desktop ä»£ç†é…ç½®æŒ‡å—

## âœ… å·²æ‰¾åˆ°ä»£ç†é…ç½®

ä½ çš„ç³»ç»Ÿä»£ç†è®¾ç½®ï¼š
- **HTTP ä»£ç†**: `127.0.0.1:7897`
- **HTTPS ä»£ç†**: `127.0.0.1:7897`
- **SOCKS ä»£ç†**: `127.0.0.1:7897`

---

## ğŸ”§ é…ç½® Docker Desktop ä½¿ç”¨ä»£ç†

### æ–¹å¼1: é€šè¿‡ GUI é…ç½®ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€ Docker Desktop**
   - ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰

2. **è¿›å…¥ä»£ç†è®¾ç½®**
   - Settings â†’ Resources â†’ Proxies

3. **é…ç½®ä»£ç†**
   - é€‰æ‹© **"Manual proxy configuration"**
   - å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
     ```
     HTTP proxy:  http://127.0.0.1:7897
     HTTPS proxy: http://127.0.0.1:7897
     ```
   - **ä¸è¦**å‹¾é€‰ "Bypass proxy settings for these hosts and domains"ï¼ˆé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼‰

4. **åº”ç”¨å¹¶é‡å¯**
   - ç‚¹å‡» **"Apply & Restart"**
   - ç­‰å¾… Docker Desktop é‡å¯å®Œæˆ

5. **éªŒè¯é…ç½®**
   ```bash
   # æµ‹è¯•æ‹‰å–é•œåƒ
   docker pull hello-world
   
   # å¦‚æœæˆåŠŸï¼Œè¯´æ˜ä»£ç†é…ç½®ç”Ÿæ•ˆ
   ```

---

### æ–¹å¼2: ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶

å¦‚æœ GUI æ–¹å¼ä¸å¯ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š

1. **æ‰¾åˆ°é…ç½®æ–‡ä»¶ä½ç½®**
   - macOS: `~/Library/Group Containers/group.com.docker/settings.json`
   - æˆ–: `~/Library/Containers/com.docker.docker/Data/settings.json`

2. **ç¼–è¾‘é…ç½®æ–‡ä»¶**
   ```json
   {
     "proxies": {
       "httpProxy": "http://127.0.0.1:7897",
       "httpsProxy": "http://127.0.0.1:7897",
       "noProxy": "*.local,169.254/16"
     }
   }
   ```

3. **é‡å¯ Docker Desktop**

---

## ğŸ§ª æµ‹è¯•ä»£ç†é…ç½®

### æµ‹è¯•1: æµ‹è¯•ä»£ç†è¿æ¥

```bash
# ä½¿ç”¨ curl æµ‹è¯•ä»£ç†
curl -x http://127.0.0.1:7897 --connect-timeout 5 -I https://registry-1.docker.io/v2/
```

å¦‚æœè¿”å› `HTTP/2 401` æˆ– `HTTP/2 200`ï¼Œè¯´æ˜ä»£ç†å·¥ä½œæ­£å¸¸ã€‚

### æµ‹è¯•2: æµ‹è¯• Docker æ‹‰å–é•œåƒ

```bash
# æ‹‰å–æµ‹è¯•é•œåƒ
docker pull hello-world
```

å¦‚æœæˆåŠŸï¼Œè¯´æ˜ Docker Desktop ä»£ç†é…ç½®ç”Ÿæ•ˆã€‚

### æµ‹è¯•3: æµ‹è¯•æ¨é€é•œåƒ

```bash
# æ„å»ºæµ‹è¯•é•œåƒ
docker build -t test-image - <<EOF
FROM alpine
CMD echo "test"
EOF

# æ ‡è®°é•œåƒ
docker tag test-image your-username/test-image:latest

# æ¨é€é•œåƒï¼ˆéœ€è¦å…ˆç™»å½•ï¼‰
docker push your-username/test-image:latest
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: ä»£ç†é…ç½®åä»ç„¶æ— æ³•è¿æ¥

**å¯èƒ½åŸå› **ï¼š
- ä»£ç†æœåŠ¡å™¨æœªè¿è¡Œ
- ä»£ç†ç«¯å£ä¸æ­£ç¡®
- Docker Desktop æœªé‡å¯

**è§£å†³**ï¼š
1. æ£€æŸ¥ä»£ç†è½¯ä»¶æ˜¯å¦è¿è¡Œ
2. ç¡®è®¤ä»£ç†ç«¯å£æ˜¯ `7897`
3. é‡å¯ Docker Desktop

### é—®é¢˜2: æ‹‰å–é•œåƒæˆåŠŸï¼Œä½†æ¨é€å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- æ¨é€éœ€è¦ HTTPS ä»£ç†
- ä»£ç†ä¸æ”¯æŒ WebSocketï¼ˆæ¨é€ä½¿ç”¨ WebSocketï¼‰

**è§£å†³**ï¼š
1. ç¡®ä¿ HTTPS ä»£ç†å·²é…ç½®
2. æ£€æŸ¥ä»£ç†è½¯ä»¶æ˜¯å¦æ”¯æŒ WebSocket
3. å°è¯•ä½¿ç”¨ SOCKS ä»£ç†ï¼ˆå¦‚æœæ”¯æŒï¼‰

### é—®é¢˜3: ä»£ç†é…ç½®å Docker Desktop æ— æ³•å¯åŠ¨

**è§£å†³**ï¼š
1. åˆ é™¤ä»£ç†é…ç½®
2. é‡å¯ Docker Desktop
3. é‡æ–°é…ç½®ä»£ç†

---

## ğŸ“ é…ç½®å®Œæˆåçš„æ­¥éª¤

1. âœ… ä»£ç†é…ç½®å®Œæˆ
2. âœ… æµ‹è¯•ä»£ç†è¿æ¥
3. âœ… æµ‹è¯• Docker æ‹‰å–é•œåƒ
4. âœ… é‡æ–°å°è¯•æ¨é€é•œåƒåˆ° DockerHub

```bash
# æ¨é€é•œåƒ
./scripts/push-to-dockerhub.sh oscarzhangzzzz
```

---

## ğŸ’¡ æç¤º

- **ä»£ç†ç«¯å£ 7897** é€šå¸¸æ˜¯ Clashã€V2Ray ç­‰ä»£ç†è½¯ä»¶çš„é»˜è®¤ç«¯å£
- å¦‚æœä»£ç†è½¯ä»¶å…³é—­ï¼ŒDocker Desktop å°†æ— æ³•è®¿é—® DockerHub
- å»ºè®®ä¿æŒä»£ç†è½¯ä»¶è¿è¡Œï¼Œæˆ–ä½¿ç”¨ç³»ç»Ÿä»£ç†è®¾ç½®

---

## ğŸ” éªŒè¯ä»£ç†é…ç½®

é…ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

```bash
# æŸ¥çœ‹ Docker ä¿¡æ¯
docker info | grep -i proxy

# æµ‹è¯•è¿æ¥
docker pull hello-world
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç°åœ¨å¯ä»¥æ¨é€é•œåƒåˆ° DockerHub äº†ï¼
